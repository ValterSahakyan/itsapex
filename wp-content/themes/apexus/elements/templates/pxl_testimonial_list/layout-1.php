<?php
extract($settings);
$img_size = !empty($img_size) ? $img_size : '448x347';
$clip_path_box = (!empty($settings['clip_path_box']) && $settings['clip_path_box'] === 'yes') ? 'has-clip-path' : '';
?>
<?php if(isset($content_list) && !empty($content_list) && count($content_list) > 0): ?>
    <div class="pxl-testimonial-list layout-<?php echo esc_attr($settings['layout'])?>">
        <div class="row">
            <div class="col-5 title <?php pxl_print_html($clip_path_box); ?>">
                <?php foreach ($content_list as $key => $value):
                    $image       = isset($value['image']) ? $value['image'] : [];
                    $thumbnail = '';
                    if(!empty($image['id'])) {
                        $img = pxl_get_image_by_size( array(
                            'attach_id'  => $image['id'],
                            'thumb_size' => $img_size,
                            'class' => 'no-lazyload',
                        ));
                        $thumbnail = $img['thumbnail'];
                    }
                    $is_active = ($active_list == $key + 1);
                    ?>
                    <div class="box-content <?php echo esc_attr( $is_active ? 'active' : '' ); ?>" data-target="#item-<?php echo esc_attr($value['_id']); ?>">
                        <?php if(!empty($thumbnail)): ?>
                            <div class="col-auto">
                                <?php pxl_print_html($thumbnail); ?>
                            </div>
                        <?php endif; ?>
                    </div>
                <?php endforeach; ?>
            </div>
            <div class="col-7 content">
                <?php
                $idx = 0;
                foreach ($content_list as $key => $value):
                    $idx++;
                    $title        = isset($value['title']) ? $value['title'] : '';
                    $description  = isset($value['description']) ? $value['description'] : '';
                    $name        = isset($value['name']) ? $value['name'] : '';
                    $position    = isset($value['position']) ? $value['position'] : '';
                    $subdescription    = isset($value['subdescription']) ? $value['subdescription'] : '';
                    $text_rating    = isset($value['text_rating']) ? $value['text_rating'] : '';
                    $is_active = ($active_list == $key + 1);
                    ?>
                    <div id="item-<?php echo esc_attr($value['_id']); ?>" class="item-inner <?php echo esc_attr( $is_active ? 'active' : '' ); ?>">
                        <div class="icon-title">
                            <?php if (!empty($settings['selected_icon']['value'])) { ?>
                                <div class="icon-wrapper">
                                    <?php \Elementor\Icons_Manager::render_icon($settings['selected_icon'], ['aria-hidden' => 'true', 'class' => 'item-icon pxl-icon'], 'i'); ?>
                                </div>
                            <?php } ?>
                            <h5 class="item-title"><?php pxl_print_html($title); ?></h5>
                            <div class="item-des"><?php pxl_print_html($description); ?></div>
                        </div>
                        <div class="name-star">
                            <h6 class="item-name"><?php pxl_print_html($name); ?></h6>
                            <span class="item-position"><?php pxl_print_html($position); ?></span>
                            <div class="pxl-divider"></div>
                            <div class="box-star">
                                <?php if (!empty($value['rating']) && $value['rating'] != 'none') : ?>
                                    <div class="item-rating-star">
                                        <span class="item-text"><?php pxl_print_html($text_rating); ?></span>
                                        <div class="item-rating <?php echo esc_attr($value['rating']); ?>">
                                            <i class="pxli pxli-rating"></i>
                                            <i class="pxli pxli-rating"></i>
                                            <i class="pxli pxli-rating"></i>
                                            <i class="pxli pxli-rating"></i>
                                            <i class="pxli pxli-rating"></i>
                                        </div>
                                    </div>
                                <?php endif; ?>
                                <div class="item-subdescription">
                                    <span class="subdescription"><?php pxl_print_html($subdescription); ?></span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 44 44">
                                    <path d="M22.0651 4.88867C24.382 4.88867 26.5876 5.33423 28.6817 6.22536C30.8204 7.11648 32.6472 8.34178 34.1621 9.90125C35.677 11.4607 36.88 13.2875 37.7712 15.3817C38.7069 17.4312 39.1524 19.6368 39.1079 21.9983C39.1524 24.3597 38.7069 26.5876 37.7712 28.6817C36.88 30.7313 35.677 32.5358 34.1621 34.0953C32.6472 35.6547 30.8204 36.88 28.6817 37.7712C26.5876 38.6623 24.382 39.1079 22.0651 39.1079C19.7036 39.1079 17.4758 38.6623 15.3817 37.7712C13.3321 36.88 11.5276 35.6547 9.96808 34.0953C8.40861 32.5358 7.18332 30.7313 6.29219 28.6817C5.40107 26.5876 4.93323 24.3597 4.88867 21.9983C4.93323 19.6368 5.40107 17.4312 6.29219 15.3817C7.18332 13.2875 8.40861 11.4607 9.96808 9.90125C11.5276 8.34178 13.3321 7.11648 15.3817 6.22536C17.4758 5.33423 19.7036 4.88867 22.0651 4.88867ZM6.96054 23.0008C7.04965 23.5355 7.11648 24.0701 7.16104 24.6048C7.25015 25.1395 7.38382 25.6742 7.56205 26.2088C7.74027 26.6989 7.89622 27.1891 8.02989 27.6792C8.20811 28.1247 8.45317 28.5703 8.76506 29.0159H13.9113C13.8222 28.5257 13.7108 28.0356 13.5771 27.5455C13.4435 27.0554 13.3321 26.5653 13.243 26.0752C13.1984 25.585 13.1316 25.0949 13.0425 24.6048C12.9533 24.0701 12.9311 23.5355 12.9756 23.0008H6.96054ZM12.9756 20.9957C12.9311 20.4611 12.9533 19.9487 13.0425 19.4586C13.1316 18.9239 13.1984 18.4115 13.243 17.9214C13.2875 17.4312 13.3766 16.9411 13.5103 16.451C13.6885 15.9609 13.8222 15.4708 13.9113 14.9807H8.76506C8.45317 15.4262 8.20811 15.8941 8.02989 16.3842C7.89622 16.8297 7.74027 17.3199 7.56205 17.8545C7.38382 18.3447 7.25015 18.857 7.16104 19.3917C7.11648 19.9264 7.04965 20.4611 6.96054 20.9957H12.9756ZM16.05 14.9807C15.9163 15.4262 15.7604 15.9163 15.5822 16.451C15.4485 16.9411 15.3371 17.4312 15.248 17.9214C15.2034 18.4115 15.1366 18.9239 15.0475 19.4586C14.9584 19.9487 14.9361 20.4611 14.9807 20.9957H29.0827C29.0827 20.4611 29.0381 19.9487 28.949 19.4586C28.9045 18.9239 28.8376 18.4115 28.7485 17.9214C28.6594 17.4312 28.5258 16.9411 28.3475 16.451C28.2139 15.9163 28.1025 15.4262 28.0134 14.9807H16.05ZM14.9807 23.0008C14.9361 23.5355 14.9584 24.0701 15.0475 24.6048C15.1366 25.0949 15.2257 25.585 15.3148 26.0752C15.4039 26.5653 15.5153 27.0777 15.649 27.6123C15.7827 28.1025 15.9163 28.5703 16.05 29.0159H28.0134C28.1025 28.5703 28.2139 28.1025 28.3475 27.6123C28.5258 27.0777 28.6594 26.5653 28.7485 26.0752C28.8376 25.585 28.9045 25.0949 28.949 24.6048C29.0381 24.0701 29.0827 23.5355 29.0827 23.0008H14.9807ZM31.0877 23.0008C31.0877 23.5355 31.0432 24.0701 30.9541 24.6048C30.9095 25.0949 30.8427 25.585 30.7536 26.0752C30.709 26.5653 30.6199 27.0554 30.4862 27.5455C30.3526 28.0356 30.2189 28.5257 30.0852 29.0159H35.3651C35.677 28.5703 35.8998 28.1247 36.0335 27.6792C36.2117 27.1891 36.3899 26.6989 36.5682 26.2088C36.7464 25.6742 36.8578 25.1395 36.9023 24.6048C36.9914 24.0701 37.0805 23.5355 37.1697 23.0008H31.0877ZM31.1546 20.9957H37.1028C37.1028 20.4611 37.036 19.9264 36.9023 19.3917C36.8132 18.857 36.7018 18.3447 36.5682 17.8545C36.4345 17.3199 36.2563 16.8297 36.0335 16.3842C35.8553 15.8941 35.6547 15.4262 35.432 14.9807H30.0852C30.2634 15.4708 30.3971 15.9609 30.4862 16.451C30.5753 16.9411 30.6645 17.4312 30.7536 17.9214C30.8872 18.4115 30.9541 18.9239 30.9541 19.4586C30.9986 19.9487 31.0655 20.4611 31.1546 20.9957ZM34.0953 12.9088H34.1621C33.6274 12.285 33.0705 11.7058 32.4913 11.1711C31.9566 10.5919 31.3328 10.0795 30.6199 9.63391C29.9516 9.14379 29.2609 8.72051 28.548 8.36406C27.8351 8.00761 27.0554 7.71799 26.2088 7.49521C26.5653 7.94077 26.8772 8.38634 27.1445 8.8319C27.4118 9.2329 27.6792 9.67847 27.9465 10.1686C28.2584 10.6141 28.5035 11.082 28.6817 11.5721C28.9045 12.0177 29.1495 12.4632 29.4169 12.9088H34.0953ZM23.1344 6.96054H23.2013C23.0676 6.96054 22.9562 6.96054 22.8671 6.96054C22.8226 6.96054 22.7334 6.96054 22.5998 6.96054C22.5107 6.91598 22.4215 6.8937 22.3324 6.8937C22.2879 6.8937 22.1765 6.8937 21.9983 6.8937C21.9537 6.8937 21.8646 6.8937 21.7309 6.8937C21.6418 6.8937 21.5527 6.91598 21.4636 6.96054C21.3745 6.96054 21.2631 6.96054 21.1294 6.96054C21.0403 6.96054 20.9512 6.96054 20.8621 6.96054C20.4165 7.4061 20.0155 7.87394 19.6591 8.36406C19.3026 8.85418 18.9462 9.34429 18.5897 9.83441C18.2333 10.3245 17.9214 10.8369 17.654 11.3716C17.4313 11.8617 17.1639 12.3741 16.852 12.9088H27.2113C26.8995 12.3741 26.6098 11.8617 26.3425 11.3716C26.0752 10.8369 25.7633 10.3245 25.4068 9.83441C25.0504 9.34429 24.6939 8.85418 24.3375 8.36406C24.0256 7.87394 23.6246 7.4061 23.1344 6.96054ZM17.7209 7.56205H17.7877C16.9857 7.78483 16.2282 8.07444 15.5153 8.43089C14.8024 8.78734 14.1118 9.18835 13.4435 9.63391C12.7751 10.0795 12.1513 10.5919 11.5721 11.1711C11.0374 11.7058 10.5028 12.285 9.96808 12.9088H14.7133C14.847 12.4632 15.0475 12.0177 15.3148 11.5721C15.5822 11.082 15.8272 10.6141 16.05 10.1686C16.2728 9.72302 16.5401 9.27746 16.852 8.8319C17.1639 8.38634 17.4535 7.96305 17.7209 7.56205ZM9.96808 31.0877H10.0349C10.4805 31.7115 10.9929 32.313 11.5721 32.8923C12.1959 33.4269 12.8197 33.9171 13.4435 34.3626C14.0673 34.8082 14.7579 35.2092 15.5153 35.5656C16.2728 35.9221 17.0302 36.234 17.7877 36.5013C17.4758 36.0558 17.1639 35.6102 16.852 35.1646C16.5401 34.7191 16.2728 34.2735 16.05 33.8279C15.8272 33.3824 15.5822 32.9368 15.3148 32.4913C15.0475 32.0011 14.847 31.5333 14.7133 31.0877H9.96808ZM20.8621 37.036H20.9289C20.9735 37.036 21.0403 37.036 21.1294 37.036C21.2631 37.036 21.3745 37.036 21.4636 37.036C21.5527 37.0805 21.6418 37.1028 21.7309 37.1028C21.8646 37.1028 21.9537 37.1028 21.9983 37.1028C22.1765 37.1028 22.2879 37.1028 22.3324 37.1028C22.4215 37.1028 22.5107 37.0805 22.5998 37.036C22.7334 37.036 22.8226 37.036 22.8671 37.036C22.9562 37.036 23.0676 37.036 23.2013 37.036C23.5577 36.5904 23.9365 36.1226 24.3375 35.6325C24.7385 35.1423 25.0949 34.6522 25.4068 34.1621C25.7187 33.672 26.0306 33.1819 26.3425 32.6918C26.6544 32.1571 26.9217 31.6224 27.1445 31.0877H16.9189C17.1416 31.6224 17.409 32.1571 17.7209 32.6918C18.0328 33.1819 18.3447 33.672 18.6565 34.1621C18.9684 34.6522 19.3026 35.1423 19.6591 35.6325C20.0601 36.1226 20.4611 36.5904 20.8621 37.036ZM26.2088 36.5013H26.2757C27.0331 36.2785 27.7906 35.9889 28.548 35.6325C29.3055 35.276 29.9961 34.875 30.6199 34.4295C31.2882 33.9393 31.912 33.4269 32.4913 32.8923C33.115 32.313 33.6497 31.7115 34.0953 31.0877H29.4169C29.1495 31.5333 28.9045 32.0011 28.6817 32.4913C28.5035 32.9368 28.2584 33.4047 27.9465 33.8948C27.6792 34.3403 27.4118 34.7859 27.1445 35.2315C26.8772 35.6325 26.5653 36.0558 26.2088 36.5013Z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                <?php endforeach; ?>
            </div>
        </div>
    </div>
<?php endif; ?>
